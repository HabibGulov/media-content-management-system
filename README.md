# Content Management Platform (CMP)

### Краткое описание проекта

**Content Management Platform (CMP)** — это гибкая и расширяемая платформа для управления мультимедийным контентом и пользовательскими данными. Система разработана с акцентом на модульность, что позволяет интегрировать дополнительные функции и улучшать производительность с минимальными изменениями в основной архитектуре.

---

#### Основные сущности

1. **User (Пользователь)**  
   Представляет пользователей платформы, включая их базовую информацию и привязку к ролям.

2. **Role (Роль)**  
   Определяет права пользователей в системе. Роли (например, "Администратор" и "Пользователь") определяют доступ к модулям и операциям.

3. **Permission (Права)**  
   Содержит детализированные разрешения, которые привязаны к ролям, обеспечивая гибкость управления доступом.

4. **Content (Контент)**  
   Представляет мультимедийные данные (видео, изображения, документы).  
   - Содержит информацию о типе контента, доступности (платный/бесплатный), категории и связанной стоимости.

5. **Category (Категория)**  
   Классифицирует контент для удобного поиска и управления.  

6. **ContentCategory (Связь контента и категорий)**  
   Связывает контент с одной или несколькими категориями, обеспечивая структуризацию данных.

---

#### Основные модули проекта

1. **User Management (Управление пользователями)**  
   Отвечает за обработку данных пользователей, их ролей и прав доступа.  
   - **Ключевые возможности:**
     - Управление пользователями, их регистрация, обновление и удаление.
     - Настройка ролей и прав доступа.
     - Проверка уровня доступа для операций (например, только администраторы могут управлять контентом).

2. **Content Management (Управление контентом)**  
   Основной модуль для работы с мультимедийным контентом.  
   - **Ключевые возможности:**
     - Добавление, изменение, удаление и просмотр контента.
     - Поддержка категорий для классификации.
     - Разделение контента на платный и бесплатный, с возможностью указания цены.  

3. **Payment (Платежи)** *(в разработке)*  
   Этот модуль пока отсутствует, однако проект обладает высокой степенью расширяемости, что позволит в будущем интегрировать **Payment** для обработки транзакций.  
   - **Планируемый функционал:**
     - Покупка платного контента.
     - Интеграция с популярными платежными системами.
     - Взаимодействие с модулями **User Management** и **Content Management** для создания безопасной экосистемы транзакций.

   Данный модуль станет ключевым элементом для монетизации платформы, поднимая её возможности на новый уровень.

---

#### Вывод

Благодаря продуманной модульной структуре и современному подходу к проектированию, CMP обеспечивает мощный функционал для управления контентом и пользователями. С дальнейшим развитием, включая добавление модуля **Payment**, система станет ещё более универсальной и востребованной.

⚠️ *Пожалуйста, учитывайте, что проект находится в стадии активной разработки а это лишь первая версия. В скором будущем ожидаются некоторые дополнения для исправной работы.*

---


### Структура и Архитектура проекта

Проект разработан на основе **монолитной архитектуры** с использованием **vertical slice подхода**. Вся функциональность разделена на модули по доменным областям.


### Особенности
1. **REST API**: 
   - Эндпоинты реализованы с использованием ASP.NET Core.
   - Swagger-документация доступна на `/swagger`.

2. **Модули**:
   - Каждый модуль разделен на:
     - Контроллеры.
     - Сервисы.
     - Репозитории.
     - DTO (модели для запросов/ответов).
   - Все данные связаны через централизованный `UnitOfWork`.

3. **База данных**:
   - Используется **PosgreSql**.
   - Управление через **Entity Framework Core**.

4. **Валидация**:
   - Для проверки входных данных применяется **FluentValidation**.

5. **Роли**:
   - Роли хранятся в таблице `Roles`.
   - Проверка ролей через свойство `Role.Name`.

---

## Структура модулей

### Пример: Модуль `Contents`

- **Контроллер**: `ContentController.cs`  
  Обрабатывает запросы, проводит базовую проверку авторизации.

- **Сервис**: `ContentService.cs`  
  Основная бизнес-логика: создание, обновление, удаление контента.

- **Репозиторий**: `ContentRepository.cs`  
  Работа с базой данных: выборка контента, проверка существования.

- **Примеры Моделей**:
  - `Content.cs` — модель базы данных.
  - `ContentCreateInfo.cs` — DTO для создания контента.
  - `ContentUpdateInfo.cs` — DTO для обновления.

---

### Управление контентом

- **Добавление, обновление и удаление контента** доступно **только администраторам**.  
  Проверка ролей осуществляется через свойство `Role.Name` в таблице `Users`.  
  Если роль пользователя не равна "Admin", выполнение данных операций запрещено.

---